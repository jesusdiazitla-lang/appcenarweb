<div class="container py-4">
  <div class="mb-4">
    <h2 class="fw-bold"><i class="bi bi-bag-check"></i> Mis Pedidos</h2>
    <p class="text-muted">Historial de todos tus pedidos realizados</p>
  </div>

  {{#if pedidos.length}}
    <div class="row g-3">
      {{#each pedidos}}
        <div class="col-12">
          <div class="card shadow-sm hover-shadow">
            <div class="card-body">
              <div class="row align-items-center">
                <!-- Logo del Comercio -->
                <div class="col-md-2 text-center">
                  {{#if this.comercio.logoComercio}}
                    <img src="{{this.comercio.logoComercio}}" alt="{{this.comercio.nombreComercio}}" class="img-fluid" style="max-height: 60px;">
                  {{else}}
                    <i class="bi bi-shop-window display-4 text-primary"></i>
                  {{/if}}
                </div>

                <!-- Información del Pedido -->
                <div class="col-md-6">
                  <h5 class="fw-bold mb-1">{{this.comercio.nombreComercio}}</h5>
                  <p class="text-muted mb-1">
                    <i class="bi bi-box-seam"></i> {{this.productos.length}} {{#if (eq this.productos.length 1)}}producto{{else}}productos{{/if}}
                  </p>
                  <p class="text-muted mb-0">
                    <i class="bi bi-calendar"></i> {{formatDate this.fechaHora}}
                  </p>
                </div>

                <!-- Estado y Total -->
                <div class="col-md-2 text-center">
                  {{#if (eq this.estado "pendiente")}}
                    <span class="badge bg-warning text-dark fs-6">
                      <i class="bi bi-clock"></i> Pendiente
                    </span>
                  {{else if (eq this.estado "en proceso")}}
                    <span class="badge bg-info fs-6">
                      <i class="bi bi-truck"></i> En Proceso
                    </span>
                  {{else if (eq this.estado "completado")}}
                    <span class="badge bg-success fs-6">
                      <i class="bi bi-check-circle"></i> Completado
                    </span>
                  {{/if}}
                  <p class="fw-bold text-success mt-2 mb-0 fs-5">{{formatCurrency this.total}}</p>
                </div>

                <!-- Botón Ver Detalle -->
                <div class="col-md-2 text-end">
                  <a href="/cliente/pedido/{{this._id}}" class="btn btn-outline-success">
                    <i class="bi bi-eye"></i> Ver Detalle
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      {{/each}}
    </div>
  {{else}}
    <div class="card shadow">
      <div class="card-body text-center py-5">
        <i class="bi bi-bag-x display-1 text-muted d-block mb-3"></i>
        <h4>No tienes pedidos realizados</h4>
        <p class="text-muted mb-4">Explora nuestros comercios y realiza tu primer pedido</p>
        <a href="/cliente/home" class="btn btn-success">
          <i class="bi bi-shop"></i> Explorar Comercios
        </a>
      </div>
    </div>
  {{/if}}
</div>